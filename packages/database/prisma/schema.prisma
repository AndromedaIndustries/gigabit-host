generator client {
  provider = "prisma-client-js"
  output   = "../generated/client"
}

datasource db {
  provider = "postgresql"
  url      = env("POSTGRES_SUPABASE_URL")
}

model Permission {
  id   String @id @default(ulid()) @db.VarChar(255)
  name String @unique @db.VarChar(255)
}

model Ssh_keys {
  id         String    @id @default(ulid()) @db.VarChar(255)
  user_id    String    @db.Uuid
  name       String    @db.VarChar(255)
  public_key String    @db.Text
  avaliable  Boolean   @default(true)
  created_at DateTime  @default(now()) @db.Timestamp(6)
  updated_at DateTime  @updatedAt @db.Timestamp(6)
  deleted_at DateTime? @db.Timestamp(6)
}

model Account {
  id          String    @id @default(ulid()) @db.VarChar(255)
  name        String    @db.VarChar(255)
  description String?   @db.Text
  created_at  DateTime  @default(now()) @db.Timestamp(6)
  updated_at  DateTime  @updatedAt @db.Timestamp(6)
  deleted_at  DateTime? @db.Timestamp(6)
  metadata    Json      @default("{}") @db.Json
  service_ids String[]  @db.VarChar(255)
  user_ids    String[]  @db.Uuid
}

model Sku {
  id                  String  @id @default(ulid()) @db.VarChar(255)
  sku                 String  @unique @db.VarChar(255)
  stripe_personal_sku String  @db.VarChar(255)
  stripe_business_sku String  @db.VarChar(255)
  name                String  @db.VarChar(255)
  type                String  @db.VarChar(255)
  description         String  @db.Text
  category            String  @db.VarChar(255)
  price               Float   @db.Real
  attributes          Json    @default("{}") @db.Json
  popular             Boolean @default(false)
  available           Boolean @default(false)
  quantity            Int     @default(0)
}

model Services {
  id                  String    @id @default(ulid()) @db.VarChar(255)
  user_id             String    @db.Uuid
  type                String    @db.VarChar(255)
  hostname            String    @db.VarChar(255)
  os                  String    @db.VarChar(255)
  public_key          String    @db.Text
  metadata            Json      @default("{}") @db.Json
  sku_id              String    @db.VarChar(255)
  current_sku_name    String    @db.VarChar(255)
  initial_sku_name    String    @db.VarChar(255)
  subscription_active Boolean   @default(false)
  subscription_id     String?   @db.VarChar(255)
  initial_checkout_id String?   @db.VarChar(255)
  status              String    @db.VarChar(255)
  status_reason       String?   @db.Text
  payment_ids         String[]  @db.VarChar(255)
  payment_status      String?   @db.VarChar(255)
  created_at          DateTime  @default(now()) @db.Timestamp(6)
  updated_at          DateTime  @updatedAt @db.Timestamp(6)
  deleted_at          DateTime? @db.Timestamp(6)
  accountId           String?   @db.VarChar(255)
}
